let list_name = ["pokemon", "harry potter"];

// Khởi tạo đối tượng đếm cho mỗi tên
let countByName = {};
list_name.forEach(name => { countByName[name] = 0; });

function find_chapters() {
  let expand_button = document.querySelector("#clicktoexp");
  let expand_text = expand_button.textContent.trim();
  if (expand_text === "Mở rộng" || expand_text === "Expand" || expand_text === "展开" || expand_text === "وسيع"){
    expand_button.click();
  }
  
  let chapters = document.querySelectorAll("#chaptercontainerinner a.listchapitem");
  for (let chapter of chapters) {
    let title = chapter.title.replace(/&nbsp;/g, " ").replace(/\u00A0/g, ' ');
    
    // Kiểm tra từng tên trong list_name
    for (let name of list_name) {
      if (title.toLowerCase().includes(name.toLowerCase())) {
        // Tăng số thứ tự tương ứng với tên được tìm thấy
        countByName[name]++;
        console.log(`>>> ${name}#${countByName[name]}: ${title}`);
        // Nếu chỉ muốn in ra một lần mỗi chapter thì thoát khỏi vòng lặp sau khi tìm thấy tên phù hợp
        break;
      }
    }
  }
  
  let current_chapters = chapters.length;
  document.querySelector("#noofchapter").innerText = current_chapters;
}

find_chapters();
